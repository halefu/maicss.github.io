<!DOCTYPE HTML>
<html>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3c252cedcb208dcc2157f54d7108d1cf";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>vagrant教程 | Maic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="Maicss">
  
  
    <meta name="description" content="这玩意就是个虚拟机，对于一般人来说，而且只能虚拟*nix系的操作系统。
但是最大的用处是公司创建一个统一的工作环境。类似于一个Docker。布置一个服务器，上面安装好工作环境，放在公共仓库，然后其他人拷贝一份配置即可。能统一管理和解决工作环境问题。
个人安装这个的代价，远比单用虚拟机软件来的大。
因为一般来说，个人安装只需要一个镜像加一个虚拟机软件即可。">
  
  <meta name="description" content="这玩意就是个虚拟机，对于一般人来说，而且只能虚拟*nix系的操作系统。
但是最大的用处是公司创建一个统一的工作环境。类似于一个Docker。布置一个服务器，上面安装好工作环境，放在公共仓库，然后其他人拷贝一份配置即可。能统一管理和解决工作环境问题。
个人安装这个的代价，远比单用虚拟机软件来的大。
因为一般来说，个人安装只需要一个镜像加一个虚拟机软件即可。">
<meta property="og:type" content="article">
<meta property="og:title" content="vagrant教程">
<meta property="og:url" content="http://maicss.com/2016/08/10/vagrant教程/index.html">
<meta property="og:site_name" content="Maic">
<meta property="og:description" content="这玩意就是个虚拟机，对于一般人来说，而且只能虚拟*nix系的操作系统。
但是最大的用处是公司创建一个统一的工作环境。类似于一个Docker。布置一个服务器，上面安装好工作环境，放在公共仓库，然后其他人拷贝一份配置即可。能统一管理和解决工作环境问题。
个人安装这个的代价，远比单用虚拟机软件来的大。
因为一般来说，个人安装只需要一个镜像加一个虚拟机软件即可。">
<meta property="og:updated_time" content="2016-08-10T13:05:09.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vagrant教程">
<meta name="twitter:description" content="这玩意就是个虚拟机，对于一般人来说，而且只能虚拟*nix系的操作系统。
但是最大的用处是公司创建一个统一的工作环境。类似于一个Docker。布置一个服务器，上面安装好工作环境，放在公共仓库，然后其他人拷贝一份配置即可。能统一管理和解决工作环境问题。
个人安装这个的代价，远比单用虚拟机软件来的大。
因为一般来说，个人安装只需要一个镜像加一个虚拟机软件即可。">
  
    <link rel="alternate" href="/atom.xml" title="Maic" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-70116787-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Maic</a></h1>
    <p><a href="/">FEE maicss@foxmail.com</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/others">NoName</a></li>
      
        <li><a href="/pics">Pics</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/08/10/vagrant教程/">
  <time datetime="2016-08-10T13:02:43.000Z">
    2016-08-10
  </time>
</a>
    
    
  
    <h1 class="title">vagrant教程</h1>
  

  </header>
  
  <div class="entry">
    
      <p>这玩意就是个虚拟机，对于一般人来说，而且只能虚拟*nix系的操作系统。</p>
<p>但是最大的用处是公司创建一个统一的工作环境。类似于一个Docker。<br>布置一个服务器，上面安装好工作环境，放在公共仓库，然后其他人拷贝一份配置即可。<br>能统一管理和解决工作环境问题。</p>
<p>个人安装这个的代价，远比单用虚拟机软件来的大。</p>
<p>因为一般来说，个人安装只需要一个镜像加一个虚拟机软件即可。<br><a id="more"></a><br>安装这个，软件要：虚拟机软件，vagranr box，专门的镜像（也就意味着不能各种尝鲜，话说我刚开始玩unix的时候，玩的就是版本，各种版本都先装一遍看看…）。</p>
<p>使用上，只能使用命令行，Windows平台还要下载专门的SSH客户端。镜像也只有官方的那几个（Ubuntu最新的为14.4）</p>
<p>总结一句话：新手绕道。</p>
<p>我最后选择这个的原因：最近想倒腾SSH，而且全命令行使用ubuntu虽然不咋滴，但是磕磕巴巴的也够用了。</p>
<h2 id="vagrant-box-安装"><a href="#vagrant-box-安装" class="headerlink" title="vagrant box 安装"></a>vagrant box 安装</h2><p>下载地址：<a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="external">Vagrant downloads page</a></p>
<p>有四个平台，分别是Mac OX，Windows，Debian，CentOS。</p>
<p>选择安装后，还要选择虚拟机软件，这里一共有两个选择：</p>
<ul>
<li>Virtual Box，Oracle出品，免费的，<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="external">Virtual Box downloads page</a>。</li>
<li>VMWare，这个据说比上面的功能强大，更好用，但是我没发现。这个是收费的。好像建成了一个生态系统，需要使用的是WorkStation，<a href="http://www.vmware.com/cn/products/workstation/workstation-evaluation.html" target="_blank" rel="external">VMware Workstation Pro downloads page</a></li>
<li>还有其他的小众的，这里就不说了。</li>
</ul>
<p>这里建议选择免费的，原因有俩，一，他是免费的（这不屁话么）。这样不花钱，或者少了破解的麻烦。二，最重要的，这玩意第二个因为收费，所以可用的镜像在原本就不多的数量里面的选择更是少的可怜。</p>
<p>SSH客户端（Windows用户）：推荐Xshell。免费版够用了<a href="https://www.netsarang.com/xshell_download.html" target="_blank" rel="external">Xshell downloads page</a>，但是这玩意每次都要填信息，而且只能点击邮箱里的连接才能下载。好烦，所以我就方到百度网盘上，大家要用的就直接点击下载好了。<br>注意检测MD5值。</p>
<p>下面是镜像。</p>
<p>官方的示例是直接ADD一个名称。这个是要去网上下载一个镜像，天朝的网大家都是知道的，建议还是下载好镜像，然后使用<code>vagrant box add name_of_vm path_of_mirror</code>。</p>
<p>这里有两个镜像下载地址，一个是官方的，一个不知道跟官方啥关系的。</p>
<p><a href="https://atlas.hashicorp.com/boxes/search" target="_blank" rel="external">hashicorp</a>, <a href="http://www.vagrantbox.es/" target="_blank" rel="external">vagrantbox</a></p>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>这里只说Windows平台的安装（Mac OX的我也装了，以后再补充吧）。</p>
<p>双击安装之后，会自动在path里添加vagrant。</p>
<p>检查安装目录下是不是有<code>vagrantfile</code>，没有的话要自己创建一个，这个是虚拟机的配置文件，这个是必须的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ mkdir vagrant_install_path</div><div class="line">$ cd vagrant_install_path</div><div class="line">$ vagrant init</div></pre></td></tr></table></figure>
<p>vagrant初始化完毕，然后开始安装镜像。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vagrant box add vmname mirror_path</div></pre></td></tr></table></figure>
<p><code>vmname</code>是你想给这个虚拟机起的名字，以后也用这个管理</p>
<p><code>mirror_path</code>是你下载的镜像的路径</p>
<p>之后开始启动已安装好的虚拟机。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vagrant up // 自带SSH的系统</div></pre></td></tr></table></figure>
<p>Xshell连接步骤：</p>
<p>文件—&gt;新建。</p>
<ul>
<li>名称自定义</li>
<li>地址127.0.0.1</li>
<li>端口2222</li>
<li>用户名vagrant</li>
<li>密码vagrant</li>
</ul>
<p>之后就是开始使用了。</p>
<h2 id="虚拟多个系统"><a href="#虚拟多个系统" class="headerlink" title="虚拟多个系统"></a>虚拟多个系统</h2><p>比如现在还是手贱，想试试Arch…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vagrant box add arch some_source_url</div></pre></td></tr></table></figure>
<p>之后，你会发现原来的ubuntu也不能用了。不管你在启动的时候用<code>vagrant up</code>还是<code>vagrant up ubuntu</code>都不行，原来这玩意没这么智能啊。</p>
<p>找配置吧。</p>
<p>打开安装文件夹里的<code>vagrant</code>文件。</p>
<p>把原来的配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Vagrant.configure(&quot;2&quot;) do |config|</div><div class="line">  config.vm.box = &quot;ubuntu1404&quot;</div><div class="line">end</div></pre></td></tr></table></figure>
<p>修改成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Vagrant.configure(&quot;2&quot;) do |config|</div><div class="line">  config.vm.define &quot;ubuntu1404&quot; do |ubuntu1404|</div><div class="line">    ubuntu1404.vm.box = &quot;ubuntu1404&quot;</div><div class="line">  end</div><div class="line">  </div><div class="line">  config.vm.define &quot;arch&quot; do |arch|</div><div class="line">    arch.vm.box = &quot;arch&quot;</div><div class="line">  end</div><div class="line">end</div></pre></td></tr></table></figure></p>
<p>配置里的很多注释我都删了，<code>ubuntu1404</code>和<code>arch</code>是我自己的配置，修改成你自己相应的名称即可。</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>如果你看了那些镜像的连接，你就会发现，其实好多都是个人发布的，然后把自己的连接放到了这个网站上。</p>
<p>如果你也想做你自己的镜像，留着自己使用或者给大家使用，你可以看看<a href="https://github.com/ckan/ckan/wiki/How-to-Create-a-CentOS-Vagrant-Base-Box" target="_blank" rel="external">这篇文章</a>。官方也有教程，<a href="https://www.vagrantup.com/docs/boxes/base.html" target="_blank" rel="external">在这</a></p>
<p>然后把你自己的连接用PR的方式推到这个<a href="https://github.com/garethr/vagrantboxes-heroku" target="_blank" rel="external">Github Repository</a>, 这个是vagrantbox的方式。</p>
<p>hashicorp的还要注册，我就没看。</p>

    
  </div>
  <footer>
    
      
      
  <div class="tags">
    <a class="tags-link" href="/tags/vagrant-linux/">vagrant linux</a>
  </div>

    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>
  <div class="ds-thread" data-title="vagrant教程">
  </div>
</section>
</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2016 <a href="/">Maicss</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'maicss' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3c252cedcb208dcc2157f54d7108d1cf";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</body>
</html>